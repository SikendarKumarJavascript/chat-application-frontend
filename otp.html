<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>otp page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>

   <div class="container ">
    <h2 class="text-center my-5" >User otp page </h2>
    <form id="otpdata">
        <div class="form-group">
            <label for="email">otp</label>
            <input type="number" class="form-control" name="otp" id="otp" 
             placeholder="Enter otp">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
   </div>

    <script>
        
// otp
// var baseurl = "http://localhost:8082";
var baseurl = "https://chat-server-data.onrender.com"
const otpdata = document.querySelector('#otpdata')
let email = window.localStorage.getItem("email")
 if(!email){
   window.location = 'login.html'
 }
 otpdata.addEventListener('submit', (event)=>{

 event.preventDefault()
 let otp = otpdata.otp.value
 let url = `${baseurl}/api/otp`
 let email = window.localStorage.getItem("email")
  axios.post(url,{
    otp,email
 })
 .then((response)=>{      
   if(typeof(Storage)!=="undefined"){
     window.localStorage.clear()
     window.location = 'index.html'
   }
   document.cookie = `wesfhs5afgysdgfuiif459vgt748bjhfukn=${response.data.token}` 
   
 }) 
 .catch(function (error) {
    alert(error.response.data);
 });

})

    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>

</body>
</html>